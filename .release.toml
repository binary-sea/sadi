# .release.toml
# Basic cargo-release configuration â€” tweak for your policy
# See https://crates.io/crates/cargo-release and its docs for more fields.
push = true
tag = true
tag-name = "v{{version}}"
publish = true
allow-branch = ["main", "v*"]
# If you have a workspace and want to release all crates with one command:
# workspace = true
# If you prefer to create / update a changelog:
changelog = "CHANGELOG.md"
# changelog-template = "changelog.hbs"

[release]
pre-release-replacements = [
    { file = "README.md", search = "sadi = \".*", replace = "{{crate_name}} = \"{{version}}\"" },
    { file = "README.md", search = "sadi = {.*", replace = "{{crate_name}} = { version = \"{{version}}\", features = [\"tracing\", \"debug\", \"thread-safe\"] }" },
    { file = "sadi/README.md", search = "sadi = \".*", replace = "{{crate_name}} = \"{{version}}\"" },
    { file = "sadi/README.md", search = "sadi = {.*", replace = "{{crate_name}} = { version = \"{{version}}\", features = [\"tracing\", \"debug\", \"thread-safe\"] }" },
    { file = "CHANGELOG.md", search = "Unreleased", replace = "{{version}}" },
    { file = "CHANGELOG.md", search = "ReleaseDate", replace = "{{date}}" },
]
